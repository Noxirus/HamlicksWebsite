(this.webpackJsonphamlicks=this.webpackJsonphamlicks||[]).push([[0],{118:function(e,t,a){},120:function(e,t,a){},121:function(e,t,a){},123:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(26),c=a.n(s),o=a(5),i=(a(88),a(7)),l=a(8),u=a(10),m=a(9),p=a(14),d=a(25),h=a(130),f=a(129),v=a(63),b=a.n(v),g=function(e){var t=e.user;return r.a.createElement(h.a,{bg:"dark",expand:"lg"},r.a.createElement(o.b,{className:"navbar-brand",to:"/"},r.a.createElement("img",{src:b.a,alt:"Hamlicks",height:"100",width:"350"})),r.a.createElement(h.a.Toggle,{"aria-controls":"basic-navbar-nav"}),r.a.createElement(h.a.Collapse,{id:"basic-navbar-nav"},r.a.createElement(f.a,{className:"ml-auto"},r.a.createElement(o.c,{className:"nav-link",to:"/flavours"},"Flavours"),r.a.createElement(o.c,{className:"nav-link",to:"/about"},"About"),!t&&r.a.createElement(r.a.Fragment,null,r.a.createElement("li",{className:"nav-item"},r.a.createElement(o.c,{className:"nav-link",to:"/login"},"Login")),r.a.createElement("li",{className:"nav-item"},r.a.createElement(o.c,{className:"nav-link",to:"/register"},"Register"))),t&&t.isAdmin&&r.a.createElement(r.a.Fragment,null,r.a.createElement("li",{className:"nav-item"},r.a.createElement(o.c,{className:"nav-link",to:"/users"},"Users"))),t&&r.a.createElement(r.a.Fragment,null,r.a.createElement("li",{className:"nav-item"},r.a.createElement(o.c,{className:"nav-link",to:"/users/".concat(t._id)},t.name)),r.a.createElement("li",{className:"nav-item"},r.a.createElement(o.c,{className:"nav-link",to:"/logout"},"Logout"))))))},y=a(3),E=a.n(y),k=a(11),w=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={data:{},errors:{}},e}return Object(l.a)(a,[{key:"renderText",value:function(e,t){var a=this.state.data;return r.a.createElement("p",null,a[e])}},{key:"renderImage",value:function(e,t){var a=this.state.data;return r.a.createElement("img",{src:a.picture,alt:e,height:"400",width:"320"})}}]),a}(n.Component),C=a(15),O=a(28),j=a.n(O);var x={init:function(){},log:function(e){console.error(e)}};j.a.defaults.baseURL="https://hamlicksnode.herokuapp.com/api",j.a.interceptors.response.use(null,(function(e){return e.response&&e.response.status>=400&&e.response.status<=500||(x.log(e),d.b.error("An unexpected error occurred")),Promise.reject(e)}));var N={get:j.a.get,post:j.a.post,put:j.a.put,delete:j.a.delete,setJwt:function(e){j.a.defaults.headers.common["x-auth-token"]=e}};function S(e){return"".concat("/users","/").concat(e)}function I(e){return _.apply(this,arguments)}function _(){return(_=Object(k.a)(E.a.mark((function e(t){return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N.post("/users",{email:t.email,name:t.name,password:t.password,favorites:[]});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function T(e){N.delete(S(e))}function P(e){return N.get(S(e))}function D(e){if(e._id){var t=Object(C.a)({},e);return delete t._id,N.put(S(e._id),t)}return N.post("/users",e)}var A=a(69),U=a.n(A);function F(){return(F=Object(k.a)(E.a.mark((function e(t,a){var n,r;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N.post("/auth",{email:t,password:a});case 2:n=e.sent,r=n.data,localStorage.setItem("token",r);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function L(){try{var e=localStorage.getItem("token");return U()(e)}catch(t){return null}}function M(){return localStorage.getItem("token")}N.setJwt(M());var B={login:function(e,t){return F.apply(this,arguments)},logout:function(){localStorage.removeItem("token")},getCurrentUser:L,loginWithJwt:function(e){localStorage.setItem("token",e)},getJwt:M};function W(e){return"".concat("/flavours","/").concat(e)}function z(e){return N.get(W(e))}function J(e){N.delete(W(e))}function q(e){if(e._id){var t=Object(C.a)({},e);return delete t._id,N.put(W(e._id),t)}return N.post("/flavours",e)}var Q=a(126),H=a(127),V=a(128),R=a(70),G=a.n(R),K=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={data:{email:"",name:"",favorites:[]}},e}return Object(l.a)(a,[{key:"populateUser",value:function(){var e=Object(k.a)(E.a.mark((function e(){var t,a,n,r,s,c,o;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=this.props.match.params.id,e.next=4,L();case 4:if((a=e.sent)._id===t||a.isAdmin){e.next=7;break}return e.abrupt("return",this.props.history.replace("/not-found"));case 7:return e.next=9,P(t);case 9:if(n=e.sent,!((r=n.data).favorites.length>0)){e.next=23;break}s=[],c=0;case 14:if(!(c<r.favorites.length)){e.next=22;break}return e.next=17,z(r.favorites[c]);case 17:o=e.sent,s.push(o.data.name);case 19:c++,e.next=14;break;case 22:this.setState({favorites:s});case 23:this.setState({data:this.mapToViewModel(r)}),e.next=29;break;case 26:e.prev=26,e.t0=e.catch(0),e.t0.response&&404===e.t0.response.status&&this.props.history.replace("/not-found");case 29:case"end":return e.stop()}}),e,this,[[0,26]])})));return function(){return e.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){var e=Object(k.a)(E.a.mark((function e(){return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.populateUser();case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"mapToViewModel",value:function(e){return{_id:e._id,name:e.name,email:e.email,favorites:e.favorites}}},{key:"render",value:function(){var e=[];0===this.state.data.favorites.length&&e.push(r.a.createElement("p",{key:"1"},"No favorites currently"));for(var t=0;t<this.state.data.favorites.length;t++)e.push(r.a.createElement(r.a.Fragment,{key:t},r.a.createElement(o.b,{to:"/flavours/".concat(this.state.data.favorites[t])},this.state.favorites[t]),r.a.createElement("br",null)));return r.a.createElement(Q.a,{className:"back"},r.a.createElement(H.a,null,r.a.createElement(V.a,{xs:12,md:7},r.a.createElement("h1",null,this.state.data.name),r.a.createElement("p",null,this.state.data.email),r.a.createElement("h3",null,"Favorite Flavours"),e,r.a.createElement("br",null),r.a.createElement(o.b,{to:"/usersedit/".concat(this.state.data._id)},r.a.createElement("button",{className:"btn btn-primary btn-sm"},"Edit"))),r.a.createElement(V.a,{xs:12,md:5},r.a.createElement("img",{className:"center",src:G.a,alt:"Oink Oink",height:"400",width:"300",margin:"auto"}))))}}]),a}(w),Y=a(50),$=a(33),X=a(38),Z=a(71),ee=function(e){return e.liked?r.a.createElement($.a,{onClick:e.onClick,style:{cursor:"pointer"},icon:X.a}):r.a.createElement($.a,{onClick:e.onClick,style:{cursor:"pointer"},icon:Z.a})},te=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,s=new Array(n),c=0;c<n;c++)s[c]=arguments[c];return(e=t.call.apply(t,[this].concat(s))).raiseSort=function(t){var a=Object(C.a)({},e.props.sortColumn);a.path===t?a.order="asc"===a.order?"desc":"asc":(a.path=t,a.order="asc"),e.props.onSort(a)},e.renderSortIcon=function(t){var a=e.props.sortColumn;return t.path!==a.path?null:"asc"===a.order?r.a.createElement($.a,{icon:X.c}):r.a.createElement($.a,{icon:X.b})},e}return Object(l.a)(a,[{key:"render",value:function(){var e=this;return r.a.createElement("thead",null,r.a.createElement("tr",null,this.props.columns.map((function(t){return r.a.createElement("th",{className:"clickable",key:t.path||t.key,onClick:function(){return e.raiseSort(t.path)}},t.label," ",e.renderSortIcon(t))}))))}}]),a}(n.Component),ae=a(20),ne=a.n(ae),re=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).renderCell=function(e,t){return t.content?t.content(e):ne.a.get(e,t.path)},e.createKey=function(e,t){return e._id+(t.path||t.key)},e}return Object(l.a)(a,[{key:"render",value:function(){var e=this,t=this.props,a=t.data,n=t.columns;return r.a.createElement("tbody",null,a.map((function(t){return r.a.createElement("tr",{key:t._id},n.map((function(a){return r.a.createElement("td",{key:e.createKey(t,a)},e.renderCell(t,a))})))})))}}]),a}(n.Component),se=function(e){var t=e.columns,a=e.sortColumn,n=e.onSort,s=e.data;return r.a.createElement("table",{className:"table"},r.a.createElement(te,{columns:t,sortColumn:a,onSort:n}),r.a.createElement(re,{columns:t,data:s}))},ce=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(i.a)(this,a),(e=t.call(this)).columns=[{path:"name",label:"Name",content:function(e){return r.a.createElement(o.b,{to:"/flavours/".concat(e._id)},e.name)}},{path:"type.name",label:"Type"},{path:"cost",label:"Cost"},{path:"licks",label:"Licks"},{key:"like",content:function(t){return r.a.createElement(ee,{liked:t.liked,onClick:function(){return e.props.onLike(t)}})}}],e.editColumn={key:"edit",content:function(e){return r.a.createElement(o.b,{to:"/flavoursedit/".concat(e._id)},r.a.createElement("button",{className:"btn btn-primary btn-sm"},"Edit"))}},e.deleteColumn={key:"delete",content:function(t){return r.a.createElement("button",{onClick:function(){return e.props.onDelete(t)},className:"btn btn-danger btn-sm"},"Delete")}};var n=B.getCurrentUser();return n&&n.isAdmin&&e.columns.push(e.editColumn)&&e.columns.push(e.deleteColumn),e}return Object(l.a)(a,[{key:"render",value:function(){var e=this.props,t=e.flavours,a=e.onSort,n=e.sortColumn;return r.a.createElement(se,{columns:this.columns,data:t,sortColumn:n,onSort:a})}}]),a}(n.Component),oe=function(e){var t=e.itemsCount,a=e.pageSize,n=e.currentPage,s=e.onPageChange,c=Math.ceil(t/a);if(1===c)return null;var o=ne.a.range(1,c+1);return r.a.createElement("nav",null,r.a.createElement("ul",{className:"pagination"},o.map((function(e){return r.a.createElement("li",{key:e,className:e===n?"page-item active":"page-item"},r.a.createElement("div",{className:"page-link",onClick:function(){return s(e)}},e))}))))},ie=function(e){var t=e.value,a=e.onChange;return r.a.createElement("input",{type:"text",name:"query",className:"form-control my-3",placeholder:"Search...",value:t,onChange:function(e){return a(e.currentTarget.value)}})};function le(e,t,a){var n=(t-1)*a;return ne()(e).slice(n).take(a).value()}var ue=function(e){var t=e.items,a=e.textProperty,n=e.valueProperty,s=e.onItemSelect,c=e.selectedItem;return r.a.createElement("ul",{className:"list-group"},t.map((function(e){return r.a.createElement("li",{onClick:function(){return s(e)},key:e[n],className:e===c?"list-group-item active":"list-group-item"},e[a])})))};ue.defaultProps={textProperty:"name",valueProperty:"_id"};var me=ue;function pe(){return N.get("/types")}var de=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={flavours:[],types:[],currentPage:1,pageSize:4,searchQuery:"",selectedType:null,sortColumn:{path:"title",order:"asc"}},e.handleDelete=function(){var t=Object(k.a)(E.a.mark((function t(a){var n,r;return E.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.state.flavours,r=n.filter((function(e){return e._id!==a._id})),e.setState({flavours:r}),t.prev=3,t.next=6,J(a._id);case 6:t.next=12;break;case 8:t.prev=8,t.t0=t.catch(3),t.t0.response&&404===t.t0.response.status&&d.b.error("This flavour has already been deleted"),e.setState({flavours:n});case 12:case"end":return t.stop()}}),t,null,[[3,8]])})));return function(e){return t.apply(this,arguments)}}(),e.handleLike=function(){var t=Object(k.a)(E.a.mark((function t(a){var n,r,s,c,o;return E.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=Object(Y.a)(e.state.flavours),r=n.indexOf(a),n[r]=Object(C.a)({},n[r]),n[r].liked=!n[r].liked,s=B.getCurrentUser(),!n[r].liked||!s){t.next=14;break}return delete s.iat,s.favorites.push(a._id),t.next=10,D(s);case 10:c=t.sent,B.loginWithJwt(c.headers["x-auth-token"]),t.next=21;break;case 14:if(n[r].liked||!s){t.next=21;break}return delete s.iat,ne.a.remove(s.favorites,(function(e){return e===a._id})),t.next=19,D(s);case 19:o=t.sent,B.loginWithJwt(o.headers["x-auth-token"]);case 21:e.setState({flavours:n});case 22:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.handlePageChange=function(t){e.setState({currentPage:t})},e.handleTypeSelect=function(t){e.setState({selectedType:t,searchQuery:"",currentPage:1})},e.handleSearch=function(t){e.setState({searchQuery:t,selectedType:null,currentPage:1})},e.handleSort=function(t){e.setState({sortColumn:t})},e.getPageData=function(){var t=e.state,a=t.pageSize,n=t.currentPage,r=t.sortColumn,s=t.selectedType,c=t.searchQuery,o=t.flavours,i=o;c?i=o.filter((function(e){return e.name.toLowerCase().startsWith(c.toLowerCase())})):s&&s._id&&(i=o.filter((function(e){return e.type._id===s._id})));var l=le(ne.a.orderBy(i,[r.path],[r.order]),n,a),u=B.getCurrentUser();if(u){if(0===u.favorites.length)return{totalCount:i.length,data:l};for(var m=0;m<u.favorites.length;m++)for(var p=0;p<l.length;p++)u.favorites[m]===l[p]._id&&(l[p].liked=!0)}return{totalCount:i.length,data:l}},e}return Object(l.a)(a,[{key:"componentDidMount",value:function(){var e=Object(k.a)(E.a.mark((function e(){var t,a,n,r,s;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,pe();case 2:return t=e.sent,a=t.data,n=[{_id:"",name:"All Types"}].concat(Object(Y.a)(a)),e.next=7,N.get("/flavours");case 7:r=e.sent,s=r.data,this.setState({flavours:s,types:n});case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state.flavours.length,t=this.state,a=t.pageSize,n=t.currentPage,s=t.sortColumn,c=t.searchQuery,i=B.getCurrentUser();if(0===e)return r.a.createElement("div",null,i&&i.isAdmin&&r.a.createElement(o.b,{to:"/flavoursEdit/new",className:"btn btn-primary",stye:{marginBottom:20}},"New Flavour"),r.a.createElement("p",{className:"back"},"Getting the flavours from the freezer."));var l=this.getPageData(),u=l.totalCount,m=l.data;return r.a.createElement("div",{className:"row back"},r.a.createElement("div",{className:"col-md-2 col-sm-4"},r.a.createElement(me,{items:this.state.types,selectedItem:this.state.selectedType,onItemSelect:this.handleTypeSelect})),r.a.createElement("div",{className:"col"},i&&i.isAdmin&&r.a.createElement(o.b,{to:"/flavoursEdit/new",className:"btn btn-primary",stye:{marginBottom:20}},"New Flavour"),1===u&&r.a.createElement("p",null,"Currently ",u," flavour in stock."),u>1&&r.a.createElement("p",null,"Currently ",u," flavours in stock."),r.a.createElement(ie,{value:c,onChange:this.handleSearch}),r.a.createElement(ce,{flavours:m,sortColumn:s,onLike:this.handleLike,onDelete:this.handleDelete,onSort:this.handleSort}),r.a.createElement(oe,{itemsCount:u,pageSize:a,currentPage:n,onPageChange:this.handlePageChange})))}}]),a}(n.Component),he=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(i.a)(this,a),(e=t.call(this)).columns=[{path:"name",label:"Name",content:function(e){return r.a.createElement(o.b,{to:"/users/".concat(e._id)},e.name)}}],e.editColumn={key:"edit",content:function(e){return r.a.createElement(o.b,{to:"/usersedit/".concat(e._id)},r.a.createElement("button",{className:"btn btn-primary btn-sm"},"Edit"))}},e.deleteColumn={key:"delete",content:function(t){return r.a.createElement("button",{onClick:function(){return e.props.onDelete(t)},className:"btn btn-danger btn-sm"},"Delete")}};var n=B.getCurrentUser();return n&&n.isAdmin&&e.columns.push(e.editColumn)&&e.columns.push(e.deleteColumn),e}return Object(l.a)(a,[{key:"render",value:function(){var e=this.props,t=e.users,a=e.onSort,n=e.sortColumn;return r.a.createElement(se,{columns:this.columns,data:t,sortColumn:n,onSort:a})}}]),a}(n.Component),fe=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={users:[],currentPage:1,pageSize:4,searchQuery:"",selectedType:null,sortColumn:{path:"title",order:"asc"}},e.handleDelete=function(){var t=Object(k.a)(E.a.mark((function t(a){var n,r;return E.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.state.users,r=n.filter((function(e){return e._id!==a._id})),e.setState({users:r}),t.prev=3,t.next=6,T(a._id);case 6:t.next=12;break;case 8:t.prev=8,t.t0=t.catch(3),t.t0.response&&404===t.t0.response.status&&d.b.error("This user has already been deleted"),e.setState({users:n});case 12:case"end":return t.stop()}}),t,null,[[3,8]])})));return function(e){return t.apply(this,arguments)}}(),e.handlePageChange=function(t){e.setState({currentPage:t})},e.handleSearch=function(t){e.setState({searchQuery:t,selectedType:null,currentPage:1})},e.handleSort=function(t){e.setState({sortColumn:t})},e.getPageData=function(){var t=e.state,a=t.pageSize,n=t.currentPage,r=t.sortColumn,s=t.searchQuery,c=t.users,o=c;s&&(o=c.filter((function(e){return e.name.toLowerCase().startsWith(s.toLowerCase())})));var i=le(ne.a.orderBy(o,[r.path],[r.order]),n,a);return{totalCount:o.length,data:i}},e}return Object(l.a)(a,[{key:"componentDidMount",value:function(){var e=Object(k.a)(E.a.mark((function e(){var t,a;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,B.getCurrentUser();case 2:if(e.sent.isAdmin){e.next=5;break}return e.abrupt("return",this.props.history.replace("/not-found"));case 5:return e.next=7,N.get("/users");case 7:t=e.sent,a=t.data,this.setState({users:a});case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state.users.length,t=this.state,a=t.pageSize,n=t.currentPage,s=t.sortColumn,c=t.searchQuery,i=B.getCurrentUser();if(0===e)return r.a.createElement("div",{className:"back"},i&&i.isAdmin&&r.a.createElement(o.b,{to:"/flavoursEdit/new",className:"btn btn-primary",stye:{marginBottom:20}},"New User"),r.a.createElement("p",null,"Somehow there are no users"));var l=this.getPageData(),u=l.totalCount,m=l.data;return r.a.createElement("div",{className:"row back"},r.a.createElement("div",{className:"col"},i&&i.isAdmin&&r.a.createElement(o.b,{to:"/flavoursEdit/new",className:"btn btn-primary",stye:{marginBottom:20}},"New User"),r.a.createElement("p",null,"Currently ",u," users."),r.a.createElement(ie,{value:c,onChange:this.handleSearch}),r.a.createElement(he,{users:m,sortColumn:s,onDelete:this.handleDelete,onSort:this.handleSort}),r.a.createElement(oe,{itemsCount:u,pageSize:a,currentPage:n,onPageChange:this.handlePageChange})))}}]),a}(n.Component),ve=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={data:{name:"",typeId:"",description:"",cost:"",licks:"",picture:""},types:[]},e}return Object(l.a)(a,[{key:"populateFlavour",value:function(){var e=Object(k.a)(E.a.mark((function e(){var t,a,n;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=this.props.match.params.id,e.next=4,z(t);case 4:a=e.sent,n=a.data,this.setState({data:this.mapToViewModel(n)}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),e.t0.response&&404===e.t0.response.status&&this.props.history.replace("/not-found");case 12:case"end":return e.stop()}}),e,this,[[0,9]])})));return function(){return e.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){var e=Object(k.a)(E.a.mark((function e(){return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.populateFlavour();case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"mapToViewModel",value:function(e){return this.setState({name:e.name,cost:e.cost,licks:e.licks}),{_id:e._id,name:e.name,typeId:e.type._id,description:e.description,cost:e.cost,licks:e.licks,picture:e.picture}}},{key:"render",value:function(){var e=B.getCurrentUser();return r.a.createElement("div",{className:"container back"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-sm-9 col-md-6"},r.a.createElement("h1",null,this.state.name),this.renderText("description","Description"),r.a.createElement("br",null),r.a.createElement("p",null,"Cost: $",this.state.cost),r.a.createElement("p",null,"Licks: ",this.state.licks,"/5")),r.a.createElement("div",{className:"col-sm-9 col-md-6"},this.renderImage("image","Image"))),r.a.createElement(o.b,{to:"/flavours"},r.a.createElement("button",{className:"btn btn-success"},"Back")),e&&e.isAdmin&&r.a.createElement(o.b,{to:"/flavoursedit/".concat(this.state.data._id)},r.a.createElement("button",{className:"btn btn-primary"},"Edit")))}}]),a}(w),be=a(36),ge=a(72),ye=a(13),Ee=a.n(ye),ke=a(31),we=function(e){var t=e.name,a=e.label,n=e.error,s=Object(ke.a)(e,["name","label","error"]);return r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:t},a),r.a.createElement("input",Object.assign({},s,{name:t,id:t,className:"form-control"})),n&&r.a.createElement("div",{className:"alert alert-danger"},n))},Ce=function(e){var t=e.name,a=e.label,n=e.options,s=e.error,c=Object(ke.a)(e,["name","label","options","error"]);return r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:t},a),r.a.createElement("select",Object.assign({name:t,id:t},c,{className:"form-control"}),r.a.createElement("option",{value:""}),n.map((function(e){return r.a.createElement("option",{key:e._id,value:e._id},e.name)}))),s&&r.a.createElement("div",{className:"alert alert-danger"},s))},Oe=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={data:{},errors:{}},e.validate=function(){var t=Ee.a.validate(e.state.data,e.schema,{abortEarly:!1}).error;if(!t)return null;var a,n={},r=Object(ge.a)(t.details);try{for(r.s();!(a=r.n()).done;){var s=a.value;n[s.path[0]]=s.message}}catch(c){r.e(c)}finally{r.f()}return n},e.validateProperty=function(t){var a=t.name,n=t.value,r=Object(be.a)({},a,n),s=Object(be.a)({},a,e.schema[a]),c=Ee.a.validate(r,s).error;return c?c.details[0].message:null},e.handleSubmit=function(t){t.preventDefault();var a=e.validate();e.setState({errors:a||{}}),a||e.doSubmit()},e.handleChange=function(t){var a=t.currentTarget,n=Object(C.a)({},e.state.errors),r=e.validateProperty(a);r?n[a.name]=r:delete n[a.name];var s=Object(C.a)({},e.state.data);s[a.name]=a.value,e.setState({data:s,errors:n})},e}return Object(l.a)(a,[{key:"renderButton",value:function(e){return r.a.createElement("button",{disabled:this.validate(),className:"btn btn-primary"},e)}},{key:"renderInput",value:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"text",n=this.state,s=n.data,c=n.errors;return r.a.createElement(we,{type:a,name:e,value:s[e],label:t,onChange:this.handleChange,error:c[e]})}},{key:"renderSelect",value:function(e,t,a){var n=this.state,s=n.data,c=n.errors;return r.a.createElement(Ce,{name:e,value:s[e],label:t,options:a,onChange:this.handleChange,error:c[e]})}}]),a}(n.Component),je=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={data:{name:"",typeId:"",description:"",cost:"",licks:"",picture:""},types:[],errors:{},name:"New Flavour"},e.schema={_id:Ee.a.string(),name:Ee.a.string().required().label("Title"),typeId:Ee.a.string().required().label("Type"),description:Ee.a.string().label("Description"),cost:Ee.a.number().required().min(0).max(10).label("Cost"),licks:Ee.a.number(),picture:Ee.a.string()},e.doSubmit=Object(k.a)(E.a.mark((function t(){return E.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,q(e.state.data);case 2:e.props.history.push("/flavours");case 3:case"end":return t.stop()}}),t)}))),e}return Object(l.a)(a,[{key:"populateTypes",value:function(){var e=Object(k.a)(E.a.mark((function e(){var t,a;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,pe();case 2:t=e.sent,a=t.data,this.setState({types:a});case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"populateFlavour",value:function(){var e=Object(k.a)(E.a.mark((function e(){var t,a,n;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,"new"!==(t=this.props.match.params.id)){e.next=4;break}return e.abrupt("return");case 4:return e.next=6,z(t);case 6:a=e.sent,n=a.data,this.setState({data:this.mapToViewModel(n)}),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),e.t0.response&&404===e.t0.response.status&&this.props.history.replace("/not-found");case 14:case"end":return e.stop()}}),e,this,[[0,11]])})));return function(){return e.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){var e=Object(k.a)(E.a.mark((function e(){return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.populateTypes();case 2:return e.next=4,this.populateFlavour();case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"mapToViewModel",value:function(e){return this.setState({name:e.name}),{_id:e._id,name:e.name,typeId:e.type._id,description:e.description,cost:e.cost,licks:e.licks,picture:e.picture}}},{key:"render",value:function(){return r.a.createElement("div",{className:"back"},r.a.createElement("h1",null,this.state.name),r.a.createElement("form",{onSubmit:this.handleSubmit},this.renderInput("name","Name"),this.renderSelect("typeId","Type",this.state.types),this.renderInput("description","Description"),this.renderInput("cost","Cost"),this.renderInput("licks","Licks","Number"),this.renderInput("picture","Picture URL"),r.a.createElement(o.b,{to:"/flavours"},r.a.createElement("button",{className:"btn btn-success"},"Back")),this.renderButton("Save")))}}]),a}(Oe),xe=a(23),Ne=a(73),Se=a.n(Ne),Ie=a(74),_e=a.n(Ie),Te=a(75),Pe=a.n(Te),De=a(76),Ae=a.n(De),Ue=function(){return r.a.createElement(xe.a,null,r.a.createElement(xe.a.Item,null,r.a.createElement("img",{className:"w-100 iceCreamImage",src:Se.a,alt:"First slide"})),r.a.createElement(xe.a.Item,null,r.a.createElement("img",{className:"w-100 iceCreamImage",src:_e.a,alt:"Second Slide"}),r.a.createElement(xe.a.Caption,{className:"carouselCaption"},r.a.createElement("h3",{className:"carouselHeader"},"Welcome to Hamlicks!"),r.a.createElement("p",{className:"carouselText"},"Where new ideas turn into interesting flavours"))),r.a.createElement(xe.a.Item,null,r.a.createElement("img",{className:"w-100 iceCreamImage",src:Pe.a,alt:"Third slide"}),r.a.createElement(xe.a.Caption,{className:"carouselCaption"},r.a.createElement("h3",{className:"carouselHeader"},"Important!"),r.a.createElement("p",{className:"carouselText"},"This is a mock website to showcase on the developers portfolio"))),r.a.createElement(xe.a.Item,null,r.a.createElement("img",{className:"w-100 iceCreamImage",src:Ae.a,alt:"Third slide"}),r.a.createElement(xe.a.Caption,{className:"carouselCaption"},r.a.createElement("h3",{className:"carouselHeader"},"Experience"),r.a.createElement("p",{className:"carouselText"},"Check out our flavours!"),r.a.createElement(o.b,{className:"nav-link center",to:"/flavours",stye:{textDecoration:"none",fontWeight:"bold"}},"Click to see them here"))))},Fe=a(78),Le=a.n(Fe),Me=a(79),Be=a.n(Me),We=function(){return r.a.createElement(Q.a,{className:"back"},r.a.createElement("h1",{className:"center"},"About Hamlicks"),r.a.createElement("p",null,"This is a website for a fake ice cream company, as a side passion of mine I love making ice cream and experimenting with new interesting flavours"),r.a.createElement("p",null,"The website itself has been created with React components as well as accesses its information from Mongo DB, the backend service is created with Node JS, express and a variety of security libraries."),r.a.createElement("h2",null,"Details"),r.a.createElement(H.a,null,r.a.createElement(V.a,{xs:12,md:6},r.a.createElement("p",null,"The flavours page is organized via pagination and you are able to sort each column either via descending or ascending order. Your favoured flavours will be saved to your account and remembered next time you log in."),r.a.createElement("p",null,"When logged in the navigation bar will change accordingly (also based on your security level). If you attempt to access a page you are not allowed to access it will prompt you to log in first before redirecting you back to the page you wished to see."),r.a.createElement("p",null,"When registering a new account the validation will auto update as you type. Informing you if your information is accurate. The register button is not clickable until the form has been filled out correctly")),r.a.createElement(V.a,{className:"center",xs:9,md:6},r.a.createElement("img",{className:"center",src:Be.a,alt:"Does that ice cream have.. ears?",height:"auto",width:"300",margin:"auto"}))),r.a.createElement("h2",null,"Security"),r.a.createElement("p",null,"The website also has tiered access, if you are registered as a user and admin you will be able to view other profiles, edit and delete flavours (and profiles as well). Regular users will be able to view their information as well as update it."),r.a.createElement("p",null,"Passwords are hash encrypted with B-Crypt for additional levels of security. When logging in your computer will be passed a Json web token to verify your account details."),r.a.createElement("img",{className:"d-block w-100",src:Le.a,alt:"Shiba wants Ice Cream!",height:"500",width:"250"}))},ze=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={data:{name:"",email:"",password:""},errors:{},name:"New User"},e.schema={_id:Ee.a.string(),name:Ee.a.string().required().label("Title"),email:Ee.a.string().email().label("Email"),password:Ee.a.string().min(5)},e.doSubmit=Object(k.a)(E.a.mark((function t(){var a,n,r;return E.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,delete(a=B.getCurrentUser()).iat,a._id=e.state.data._id,a.name=e.state.data.name,a.email=e.state.data.email,a.password=e.state.data.password,a.favorites=e.state.favorites,t.next=10,D(a);case 10:n=e.props.location.state,window.location=n?n.from.pathname:"/",t.next=17;break;case 14:t.prev=14,t.t0=t.catch(0),t.t0.response&&400===t.t0.response.status&&((r=Object(C.a)({},e.state.errors)).email=t.t0.response.data,e.setState({errors:r}));case 17:e.props.history.push("/");case 18:case"end":return t.stop()}}),t,null,[[0,14]])}))),e}return Object(l.a)(a,[{key:"populateUser",value:function(){var e=Object(k.a)(E.a.mark((function e(){var t,a,n,r;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=this.props.match.params.id,e.next=4,B.getCurrentUser();case 4:if((a=e.sent)._id===t||a.isAdmin){e.next=7;break}return e.abrupt("return",this.props.history.replace("/not-found"));case 7:if("new"!==t){e.next=9;break}return e.abrupt("return");case 9:return e.next=11,P(t);case 11:n=e.sent,r=n.data,this.setState({data:this.mapToViewModel(r)}),e.next=19;break;case 16:e.prev=16,e.t0=e.catch(0),e.t0.response&&404===e.t0.response.status&&this.props.history.replace("/not-found");case 19:case"end":return e.stop()}}),e,this,[[0,16]])})));return function(){return e.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){var e=Object(k.a)(E.a.mark((function e(){return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.populateUser();case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"mapToViewModel",value:function(e){return this.setState({name:e.name,favorites:e.favorites}),{_id:e._id,name:e.name,email:e.email,password:""}}},{key:"render",value:function(){return r.a.createElement("div",{className:"back"},r.a.createElement("h1",null,this.state.name),r.a.createElement("form",{onSubmit:this.handleSubmit},this.renderInput("name","Name"),this.renderInput("email","Email"),this.renderInput("password","Password","password"),this.renderButton("Save")))}}]),a}(Oe),Je=function(){return r.a.createElement("h1",null,"Not Found")},qe=a(80),Qe=a.n(qe),He=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={data:{email:"",password:""},errors:{}},e.schema={email:Ee.a.string().required().label("Email"),password:Ee.a.string().required().label("Password")},e.doSubmit=Object(k.a)(E.a.mark((function t(){var a,n,r;return E.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a=e.state.data,t.next=4,B.login(a.email,a.password);case 4:n=e.props.location.state,window.location=n?n.from.pathname:"/",t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),t.t0.response&&400===t.t0.response.status&&((r=Object(C.a)({},e.state.errors)).email=t.t0.response.data,e.setState({errors:r}));case 11:case"end":return t.stop()}}),t,null,[[0,8]])}))),e}return Object(l.a)(a,[{key:"render",value:function(){return B.getCurrentUser()?r.a.createElement(p.a,{to:"/"}):r.a.createElement(Q.a,{className:"back"},r.a.createElement(H.a,null,r.a.createElement(V.a,{xs:12,md:7},r.a.createElement("h1",null,"Login"),r.a.createElement("form",{onSubmit:this.handleSubmit},this.renderInput("email","Email"),this.renderInput("password","Password","password"),this.renderButton("Login"))),r.a.createElement(V.a,{xs:12,md:5},r.a.createElement("img",{className:"center",src:Qe.a,alt:"Thats one cool chick",height:"400",width:"300",margin:"auto"}))))}}]),a}(Oe),Ve=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(l.a)(a,[{key:"componentDidMount",value:function(){B.logout(),window.location="/"}},{key:"render",value:function(){return null}}]),a}(n.Component),Re=function(e){e.path;var t=e.component,a=e.render,n=Object(ke.a)(e,["path","component","render"]);return r.a.createElement(p.b,Object.assign({},n,{render:function(e){return B.getCurrentUser()?t?r.a.createElement(t,e):a(e):r.a.createElement(p.a,{to:{pathname:"/login",state:{from:e.location}}})}}))},Ge=a(81),Ke=a.n(Ge),Ye=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={data:{email:"",password:"",name:""},errors:{}},e.schema={email:Ee.a.string().required().label("Email"),password:Ee.a.string().required().min(5).label("Password"),name:Ee.a.string().required().min(2).label("Name")},e.doSubmit=Object(k.a)(E.a.mark((function t(){var a,n;return E.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,I(e.state.data);case 3:a=t.sent,B.loginWithJwt(a.headers["x-auth-token"]),window.location="/",t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),t.t0.response&&400===t.t0.response.status&&((n=Object(C.a)({},e.state.errors)).email=t.t0.response.data,e.setState({errors:n}));case 11:case"end":return t.stop()}}),t,null,[[0,8]])}))),e}return Object(l.a)(a,[{key:"render",value:function(){return r.a.createElement(Q.a,{className:"back"},r.a.createElement(H.a,null,r.a.createElement(V.a,{xs:12,md:7},r.a.createElement("h1",null,"Register"),r.a.createElement("form",{onSubmit:this.handleSubmit},this.renderInput("email","Email"),this.renderInput("name","Name"),this.renderInput("password","Password","password"),this.renderButton("Register"))),r.a.createElement(V.a,{xs:12,md:5},r.a.createElement("img",{className:"center",src:Ke.a,alt:"Strawpiggy",height:"400",width:"300",margin:"auto"}))))}}]),a}(Oe),$e=(a(118),a(119),a(120),a(121),function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={},e}return Object(l.a)(a,[{key:"componentDidMount",value:function(){var e=B.getCurrentUser();this.setState({user:e})}},{key:"render",value:function(){var e=this.state.user;return r.a.createElement(r.a.Fragment,null,r.a.createElement(d.a,null),r.a.createElement(g,{user:e}),r.a.createElement("main",{className:"container"},r.a.createElement(p.d,null,r.a.createElement(p.b,{path:"/login",component:He}),r.a.createElement(p.b,{path:"/logout",component:Ve}),r.a.createElement(p.b,{path:"/register",component:Ye}),r.a.createElement(Re,{path:"/flavoursedit/:id",component:je}),r.a.createElement(Re,{path:"/users/:id",component:K}),r.a.createElement(Re,{path:"/users",render:function(t){return r.a.createElement(fe,Object.assign({},t,{user:e}))}}),r.a.createElement(Re,{path:"/usersedit/:id",component:ze}),r.a.createElement(p.b,{path:"/about",component:We}),r.a.createElement(p.b,{path:"/flavours/:id",component:ve}),r.a.createElement(p.b,{path:"/flavours",render:function(t){return r.a.createElement(de,Object.assign({},t,{user:e}))}}),r.a.createElement(p.b,{path:"/not-found",component:Je}),r.a.createElement(p.b,{path:"/",exact:!0,component:Ue}),r.a.createElement(p.a,{to:"/not-found"}))))}}]),a}(n.Component));a(122);c.a.render(r.a.createElement(o.a,null,r.a.createElement($e,null)),document.getElementById("root"))},63:function(e,t,a){e.exports=a.p+"static/media/Hamlicks_TITLE.92500dbc.png"},70:function(e,t,a){e.exports=a.p+"static/media/Piggy.8b35c35c.png"},73:function(e,t,a){e.exports=a.p+"static/media/Hamlicks_LOGOCropped.e2c8826e.png"},74:function(e,t,a){e.exports=a.p+"static/media/Carousel1.0efe9e2a.jpg"},75:function(e,t,a){e.exports=a.p+"static/media/Carousel2.291d3dec.jpg"},76:function(e,t,a){e.exports=a.p+"static/media/Carousel3.b11f7d05.jpg"},78:function(e,t,a){e.exports=a.p+"static/media/About.1ed87fd8.png"},79:function(e,t,a){e.exports=a.p+"static/media/Minty.0ff150a4.png"},80:function(e,t,a){e.exports=a.p+"static/media/Chicky.26eaf9af.png"},81:function(e,t,a){e.exports=a.p+"static/media/Strawpiggy.648321ea.png"},83:function(e,t,a){e.exports=a(123)},88:function(e,t,a){}},[[83,1,2]]]);
//# sourceMappingURL=main.fbafd72e.chunk.js.map